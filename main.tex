
\documentclass[a4paper,UKenglish,cleveref, autoref, thm-restate, anonymous]{lipics-v2021}
%This is a template for producing LIPIcs articles. 
%See lipics-v2021-authors-guidelines.pdf for further information.
%for A4 paper format use option "a4paper", for US-letter use option "letterpaper"
%for british hyphenation rules use option "UKenglish", for american hyphenation rules use option "USenglish"
%for section-numbered lemmas etc., use "numberwithinsect"
%for enabling cleveref support, use "cleveref"
%for enabling autoref support, use "autoref"
%for anonymousing the authors (e.g. for double-blind review), add "anonymous"
%for enabling thm-restate support, use "thm-restate"
%for enabling a two-column layout for the author/affilation part (only applicable for > 6 authors), use "authorcolumns"
%for producing a PDF according the PDF/A standard, add "pdfa"

\usepackage{bm}

%\pdfoutput=1 %uncomment to ensure pdflatex processing (mandatatory e.g. to submit to arXiv)
%\hideLIPIcs  %uncomment to remove references to LIPIcs series (logo, DOI, ...), e.g. when preparing a pre-final version to be uploaded to arXiv or another public repository

%\graphicspath{{./graphics/}}%helpful if your graphic files are in another directory

\bibliographystyle{plainurl}% the mandatory bibstyle

\title{Characterizing NC${}^1$ with Typed Semigroups} %TODO Please add

%\titlerunning{Dummy short title} %TODO optional, please use if title is longer than one line

\author{Anuj Dawar}{Department of Computer Science and Technology, University of Cambridge, United Kingdom \and \url{https://www.cl.cam.ac.uk/~ad260/} }{anuj.dawar@cl.cam.ac.uk}{https://orcid.org/0000-0003-4014-8248}{(Optional) author-specific funding acknowledgements}%TODO mandatory, please use full name; only 1 author per \author macro; first two parameters are mandatory, other parameters can be empty. Please provide at least the name of the affiliation and the country. The full address is optional. Use additional curly braces to indicate the correct name splitting when the last name consists of multiple name parts.

\author{Aidan T. Evans\footnote{Corresponding Author}}{Department of Computer Science and Technology, University of Cambridge, United Kingdom \and \url{https://www.aidantevans.com/} }{ate26@cam.ac.uk}{https://orcid.org/0009-0007-9084-3608}{[funding]}

\authorrunning{A. Dawar and A.\,T. Evans} %TODO mandatory. First: Use abbreviated first/middle names. Second (only in severe cases): Use first author plus 'et al.'

\Copyright{Anuj Dawar and Aidan T. Evans} %TODO mandatory, please use full first names. LIPIcs license is "CC-BY";  http://creativecommons.org/licenses/by/3.0/

\ccsdesc[100]{\textcolor{red}{Replace ccsdesc macro with valid one}} %TODO mandatory: Please choose ACM 2012 classifications from https://dl.acm.org/ccs/ccs_flat.cfm 

\keywords{Dummy keyword} %TODO mandatory; please add comma-separated list of keywords

\category{} %optional, e.g. invited paper

\relatedversion{} %optional, e.g. full version hosted on arXiv, HAL, or other respository/website
%\relatedversiondetails[linktext={opt. text shown instead of the URL}, cite=DBLP:books/mk/GrayR93]{Classification (e.g. Full Version, Extended Version, Previous Version}{URL to related version} %linktext and cite are optional

%\supplement{}%optional, e.g. related research data, source code, ... hosted on a repository like zenodo, figshare, GitHub, ...
%\supplementdetails[linktext={opt. text shown instead of the URL}, cite=DBLP:books/mk/GrayR93, subcategory={Description, Subcategory}, swhid={Software Heritage Identifier}]{General Classification (e.g. Software, Dataset, Model, ...)}{URL to related version} %linktext, cite, and subcategory are optional

%\funding{(Optional) general funding statement \dots}%optional, to capture a funding statement, which applies to all authors. Please enter author specific funding statements as fifth argument of the \author macro.

\acknowledgements{I want to thank \dots}%optional

%\nolinenumbers %uncomment to disable line numbering


\newcommand{\todo}[1]{\textit{\textcolor{red}{[TODO]: #1}}}
 
\definecolor{ate}{rgb}{0.58, 0.0, 0.83}
\newcommand{\ate}[1]{\textit{\textcolor{ate}{[Aidan]: #1}}}



%Editor-only macros:: begin (do not touch as author)%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\EventEditors{John Q. Open and Joan R. Access}
\EventNoEds{2}
\EventLongTitle{42nd Conference on Very Important Topics (CVIT 2016)}
\EventShortTitle{CVIT 2016}
\EventAcronym{CVIT}
\EventYear{2016}
\EventDate{December 24--27, 2016}
\EventLocation{Little Whinging, United Kingdom}
\EventLogo{}
\SeriesVolume{42}
\ArticleNo{23}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}
\input{macros.tex}

\maketitle

%TODO mandatory: add short abstract of the document
\begin{abstract}
    \todo{}
\end{abstract}

\newpage

\section{Introduction}


Much work in theoretical computer science is concerned with studying classes of formal languages, whether these are classes defined in terms of grammars and expressions, such as the class of regular or context-free languages, or whether they are \emph{complexity classes} such as $\PT$ and $\NP$, defined by resource bounds on machine models.  Indeed, the distinction between these are largely historical as most classes of interest admit different characterizations based on machine models, grammars, logical definability, or algebraic expressions. The class of regular languages can be characterized as the languages accepted by linear-time-bounded single-tape Turing machines~\cite{hennie1965one} while $\PT$ can be characterized without reference to resources as the languages recognized by multi-head two-way pushdown automata~\cite{cook1971characterizations}.  The advantage of the variety of characterizations is, of course, the fact that these bring with them different mathematical toolkits that can be brought to the study of the classes.

The class of regular languages has arguably the richest theory in this sense of diversity of characterizations.  Virtually all students of computer science learn of the equivalence of deterministic and nondeterministic finite automata, regular languages and linear grammars and many also know that the regular languages are exactly those definable in monadic second-order logic with an order predicate.  Perhaps the most productive approach to the study of regular languages is via their connection to finite semigroups.  Every language $L$ has a syntactic semigroup, which is finite if, and only if, $L$ is regular.  Moreover, closure properties of classes of regular languages relate to natural closure properties of classes of semigroups, via Eilenberg's Correspondence Theorem~\cite{eilenberg1976automata}.  This, together with the tools of  \emph{Krohn-Rhodes theory}, gives rise to \emph{algebraic automata theory}---which leads to the definition of natural subclasses of the class of regular languages, to effective decision procedures for automata recognizing such classes, and to separation results.

When it comes to studying computational complexity, we are mainly interested in classes of languages richer than just the regular languages.  Thus the syntactic semigroups of the languages are not necessarily finite any longer and the extensive tools of Krohn-Rhodes theory are not available to study them.  Nonetheless, some attempts have been made to extend the methods of algebraic automata theory to classes beyond the regular languages.  Most significant is the work of Krebs and collaborators~\cite{behle2007linear,behle2011typed,krebs2007characterizing,krebs2008typed,cano2021positive}, which introduces the notion of \emph{typed semigroups}.  The idea is to allow for languages with infinite syntactic semigroups, but limit the languages they recognize by associating with them a finite collection of types.  This allows for the formulation of a version of Eilenberg's Correspondence theorem associating closure properties on classes of typed semigroups with corresponding closure properties of classes of languages.  In particular, this implies that most complexity classes of interest can be uniquely characterized in terms of an associated class of typed semigroups~\cite{behle2011typed}.  An explicit description of the class characterizing \textsc{DLogTime}-uniform $\TC^0$ is given in~\cite{krebs2007characterizing,krebs2008typed}.  This is obtained through a general method which allows us to construct typed semigroups corresponding to \emph{unary quantifiers} defined from specific languages~\cite{krebs2008typed} (see also Theorem~\ref{thm:logcircalgequiv} below).

In this paper, we extend this work to obtain a characterization of \textsc{DLogTime}-uniform $\NC^1$ as the class of languages recognized by the collection of typed semigroups obtained as the closure under \emph{ordered strong block products} of three typed semigroups: the group of integers with types for positive and negative integers; the group of natural numbers with types for the square numbers and non-square numbers; and a finite non-solvable group such as $S_5$ with a type for each subset of the group.  Full definitions of these terms follow below.  Our result is obtained by first characterizing \textsc{DLogTime}-uniform $\NC^1$ in terms of logical definability in an extension of first-order logic with only unary quantifiers.  It is known that any regular language whose syntactic semigroup is a non-solvable groups is complete for $\NC^1$ under reductions definable in first-order logic with arithmetic predicates ($\FO(+,\times)$)~\cite{barrington1990uniformity}.  From this, we know we can describe $\NC^1$ as the class of languages definable in an extension of $\FO(+,\times)$ with quantifiers (of arbitrary arity) associated with the regular language corresponding to the word problem for $S_5$.  Our main technical contribution is to show that the family of such quantifiers associated with any regular language $L$ can be replaced with just the unary quantifiers.  This also answers a question left open in~\cite{lautemann2001descriptive}.

In \autoref{sec:prelim}, we cover the relevant background material on semigroup theory, typed semigroups, and multiplication quantifiers.   In \autoref{sec:mult}, we establish the main technical result showing that quantifiers of higher arity over a regular language $L$ can be defined using just unary quantifiers over the syntactic semigroup of $L$.  Finally, in \autoref{sec:alg}, we apply this to obtain the algebraic characterization of \textsc{DLogTime}-uniform $\NC^1$.



\section{Preliminaries}\label{sec:prelim}


We assume the reader is familiar with basic concepts of formal language theory, automata theory, complexity theory, and logic.  We quickly review definitions we need to fix notation and establish conventions.

We write $\mathbb{Z}$ for the set of integers, $\mathbb{N}$ for the set of natural numbers (including $0$), and $\mathbb{Z}^+$ for the set of positive integers.
We write $[n]$ for the set of integers $\{1,\ldots,n\}$ and $\mathbb{S}$ for the set of \emph{square} integers.  That is, $\mathbb{S} = \{ x \in \mathbb{Z}^+ \mid x = y^2 \text{ for some } y \in \mathbb{Z}\}$.

For a fixed $n \in \mathbb{Z}^+$ and an integer $i \in [n]$, we define the \emph{$n$-bit one-hot encoding} of $i$ to be the binary string $b \in \{0,1\}^n$ such that $b_j = 1$ if, and only if,  $j = i$.

\subsection{Semigroups, Monoids and Groups}
\label{sec:backgroundsemi}

A \emph{semigroup} $(S, \cdot)$ is a set $S$ equipped with an \emph{associative} binary operation.  We call a semigroup \emph{finite} if $S$ is finite. Context permitting, we may refer to a semigroup $(S, \cdot)$ simply by its underlying set $S$.  A \emph{monoid} $(M, \cdot)$ is a semigroup with a distinguished element $1 \in M$ such that for all $m \in M$, $1 \cdot m = m \cdot 1 = m$.  We call $1$ the \emph{identity} or \emph{neutral} element of $M$.  A \emph{group} $(G, \cdot)$ is a monoid such that for every $g \in G$, there exists an element $g^{-1} \in G$ such that $g \cdot g^{-1} = g^{-1} \cdot g = 1$.  We call $g^{-1}$ the \emph{inverse} of $g$.  

% TODO: remove: A semigroup $(S, \cdot)$ is \emph{cancellative} if for $a,b,c \in S$, (1) if $a \cdot b = a \cdot c$, then $b = c$ and (2) if $b \cdot a = c \cdot a$, then $b = c$.  In particular, every group is a cancellative semigroup.

Note that $(\mathbb{Z},+)$ is a group, $(\mathbb{N},+)$ is a monoid but not a group and $(\mathbb{Z}^+,+)$ is a semigroup but not a monoid.  In the first two cases, the identity element is $0$.  When we refer to the semigroups $\mathbb{Z}$ or $\mathbb{N}$ we assume that the operation referred to is standard addition.

For a semigroup $(S, \cdot)$, we say that a set $G \subseteq S$ \emph{generates} $S$ if $S$ is equal to the closure of $G$ under $\cdot$; we denote this by $S = \langle G \rangle_{\cdot}$, or, simply, $\langle G \rangle$ if the operation is clear from context, and call $G$ a \emph{generating set of} $S$. We say that $S$ is \emph{finitely generated} if there exists a finite generating set of $S$.  All semigroups we consider are finitely generated.  Note that $\mathbb{Z}^+$ is generated by $\{1\}$, $\mathbb{N}$ by $\{0,1\}$ and $\mathbb{Z}$ by $\{1,-1\}$.

We write $U_1$ for the monoid $(\{0,1\},\cdot)$ where the binary operation is the standard multiplication.  Note that $1$ is the identity element here.
For any set $S$, we denote by $S^+$ the set of non-empty finite strings over $S$ and by $S^*$ the set of all finite strings over $S$.  Equipped with the concatenation operation on strings, which we denote by either $\circ$ or simply juxtaposition, $S^*$ is a monoid and $S^+$ is a semigroup but not a monoid.  We refer to these as the \emph{free monoid} and \emph{free semigroup} over $S$, respectively.  Note that $S$ is a set of generators for $S^+$ and $S \cup \{\epsilon\}$ is a set of generators for $S^*$.

A homomorphism from a semigroup $(S, \cdot_S)$ to a semigroup $(T, \cdot_T)$ is a function $h : S \rightarrow T$ such that for all $s_1, s_2 \in S$, $h(s_1 \cdot_S s_2) = h(s_1) \cdot_T h(s_2)$.     A \emph{congruence} on a semigroup $(S, \cdot)$ is an equivalence relation $\sim$ on $S$ such that for all $a,b,c,d \in S$, if $a \sim b$ and $c \sim d$, then $a \cdot c \sim b \cdot d$.  We denote by $S/{\sim}$ the set of equivalence classes of $\sim$ on $S$.  We denote by $[a]_{\sim}$, or simply $[a]$, the equivalence class of $a \in S$ under $\sim$.  Any congruence $\sim$ gives rise to the \emph{quotient semigroup} of $S$ by $\sim$, namely the semigroup $(S/{\sim}, \star)$ where for $[a],[b] \in S/{\sim}$, $[a] \star [b] = [a \cdot b]$.  The map $\eta : S \rightarrow S/{\sim}$ defined by $\eta(a) = [a]$ is then a homomorphism, known as the  \emph{canonical homomorphism} of $S$ onto $S/{\sim}$.

For future reference, we formally define the syntactic congruence associated with a language $L$.
\begin{definition}\label{def:syncong}
    Let $L$ be a language. We define the \emph{syntactic congruence} of $L$ as the equivalence relation $\sim_L$ on $\Sigma^+$ such that for all $x, y \in \Sigma^+$, $x \sim_L y$ if and only if for all $w,v \in \Sigma^+$, $wxv \in L$ iff $wyv \in L$.
  \end{definition}
 It is easily seen that this relation is a congruence on the free monoid $\Sigma^*$.  The quotient semigroup $\Sigma^*/\sim_L$ is known as the \emph{syntactic semigroup} of $L$.  More generally, we say that a semigroup $S$ \emph{recognizes} the language $L$ if there is a homomorphism $h: \Sigma^+ \rightarrow S$ and a set $A \subseteq S$ such that $L = h^{-1}(A)$.  It is easily seen that the syntactic semigroup of $L$ recognizes $L$.  A language is regular if, and only if, its syntactic semigroup is finite.

\subsection{Logics and Quantifiers}\label{sec:backgroundmult}

We assume familiarity with the basic syntax and semantics of first-order logic.  In this paper, the logic is always interpreted in finite relational structures.  We generally denote structures by Fraktur letters, $\str{A}$, $\str{B}$, etc., and the corresponding universe of the structure is denoted $|\str{A}|$, $|\str{B}|$, etc.
We are almost exclusively interested in \emph{strings} over a finite alphabet.  Thus, fix an alphabet $\Sigma$.  A $\Sigma$-string is then a structure $\str{A}$ whose universe $A$ is linearly ordered by a binary relation $<$ and which interprets a set of unary relation symbols $(R_{\sigma})_{\sigma \in \Sigma}$.  For each element $a \in |\str{A}|$ there is a unique $\sigma \in \Sigma$ such that $a$ is in the interpretation of $R_{\sigma}$.

More generally, let $\tau$ be any relational vocabulary consisting of a binary relation symbol $<$ and unary relation symbols $R_1,\ldots,R_k$.  We can associate with any $\tau$-structure in which $<$ is a linear order a string over an alphabet of size $2^k$ as formalized in the following definition.
\begin{definition}\label{def:associated}
  For $\tau$ a relational vocabulary consisting of a binary relation symbol $<$ and unary relation symbols $R_1,\ldots,R_k$, and $\str{A}$ a $\tau$-structure with $n$ elements that interprets the symbol $<$ as a linear order of its universe, we define the string $w_{\str{A}}$ \emph{associated} with $\str{A}$ as the string of length $n$ over the alphabet $\Sigma_k = \{0,1\}^k$ of size $2^k$ so that if $a$ is the $i$th element  of $w_{\str{A}}$, then $a$ is the $k$-tuple where $a_j =1$ if, and only if, $R_j$ holds at the $i$th element of $\str{A}$.
\end{definition}

This way, we can assocate a language with any isomorphism-closed class of structures over the vocabulary $\tau$.  We formalise this definition for future use.
\begin{definition}\label{def:associated-lang}
  For $\tau$ a relational vocabulary consisting of a binary relation symbol $<$ and unary relation symbols $R_1,\ldots,R_k$, and $\mathcal{A}$ a class of $\tau$-structures, we define the language $L_{\mathcal{A}}$ over the alphabet $\Sigma_k = \{0,1\}^k$ to be
  $$L_{\mathcal{A}} = \{ w_{\str{A}} \mid \str{A} \in \mathcal{A} \}.$$

  Conversely, for any language $L$ over the alphabet $\Sigma_k$, we define the class of $\tau$-structures $\mathcal{S}_L$ to be
  $$\mathcal{S}_L = \{ \str{A} \mid w_{\str{A}} \in L \}.$$
\end{definition}

As the elements of a string $\str{A}$ are linearly ordered, we can identify them with an initial segment $\{1,\ldots,n\}$ of the positive integers.  In other words, we treat a string with universe $\{1,\ldots,n\}$ and the standard order on these elements as a canonical representative of its isomorphism class.  In addition to the order predicate, we may allow other \emph{numerical predicates} to appear in formulas of our logics.  These are predicates whose meaning is completely determined by the size $n$ of the structure and the ordering of its elements.  In particular, we have ternary predicates $+$ and $\times$ for the partial addition and multiplication functions.

An insight due to Lindstr\"om allows us to define a \emph{quantifier} from any isomorphism-closed class of structures (see~\cite{Ebb85}).  Specifically, let $Q$ be any isomorphism-closed class of structures in a relational vocabulary $\tau = \langle R_1,\ldots,R_l\rangle$, where for each $i$, $R_i$ is a relation symbol of arity $r_i$.  For any vocabulary $\sigma$ and positive integer $d$, an \emph{interpretation} of $\tau$ in $\sigma$ of dimension $d$ is a tuple of formulas $I = (\phi_1(\tup{x}_1),\dots, \phi_l(\tup{x}_l))$ of vocabulary $\sigma$ where $\phi_i$ is associated with a tuple $\tup{x}_i$ of variables of length $dr_i$.  Suppose we are given a $\sigma$-structure $\str{A}$ and an assignment $\alpha$ that takes variables to elements of $\str{A}$.  Then let $\phi_i^{\str{A},\alpha}$ denote the relation of arity $dr_i$ consisting of the set of tuples $\{\tup{a} \in |\str{A}|^{dr_i} \mid \str{A} \models \phi_i[\alpha[\tup{x}_i/\tup{a}]] \}$.  Then, the interpretation $I$ defines a map that takes a $\sigma$-structure $\str{A}$, along with an assignment $\alpha$ to the  $\tau$-structure $I(\str{A},\alpha)$ with universe $|\str{A}|^d$ where the interpretation of $R_i$ is the set $\phi_i^{\str{A},\alpha}$, seen as a relation of arity $r_i$ on $|\str{A}|^d$.

Then, in a logic with quantifier $Q$, we can form formulas of the form
$$Q \tup{x}_1\cdots \tup{x}_l (\phi_1,\ldots,\phi_l)$$
in which occurrences in the the subformula $\phi_i$  of variables among $x_i$ are bound.  The semantics of this quantifier are given by the rule that 
$Q \tup{x}_1\cdots \tup{x}_l (\phi_1,\ldots,\phi_l)$ is true in a structure $\str{A}$ under some interpretation $\alpha$ of values to the free variables if the $\tau$-structure $I(\str{A},\alpha)$ is in $Q$.  Note, we have defined what are usually called \emph{vectorized quantifiers}, in that they can take interpretations of any dimension.  Another way of formulating this is to have a separate quantifier $Q_d$ for each dimension $d$.  We switch between these notations when it causes no confusion and we call $Q_d$ the \emph{vectorization} of $Q$ of dimension $d$.


We are particularly interested in interpretations $I$ where both $\sigma$ and $\tau$ are vocabularies of strings.  These are also known in the literature as \emph{string-to-string tranducers}~\cite{CITE3}.    We further restrict ourselves to interpretations in which the definition of the linear order in $I(\str{A},\alpha)$ is always the lexicographic order on $d$-tuples of $\str{A}$ induced by the order in $\str{A}$.  This order is easily defined by a (quantifier-free) first-order formula, and we simply omit it from the description of $I$.  Hence, we only need to specify the interpretation giving the unary relations in $\tau$ and an interpretation of dimension $d$ has the simple form $(\phi_1(\tup{x}_1),\ldots, \phi_l(\tup{x}_l))$, where all tuples of variables have length $d$.  We can then assume, without loss of generality, that they are all the same tuple $\tup{x}$ and we thus write a formula with a string quantifier $Q$ as
$$Q \tup{x} (\phi_1,\ldots,\phi_l).$$
Observe that a quantifier applied to an interpretation of dimension $d$ will then bind $d$ variables.

We say that an interpretation is \emph{unary} if it has dimension $1$.  We now introduce some notation we use in the rest of the paper for various logics formed by combining particular choices of quantifiers and numerical predicates.
\begin{definition}
  For a set of quantifiers $\mathfrak{Q}$ and numerical predicates $\mathfrak{N}$, we denote by $(\mathfrak{Q})[\mathfrak{N}]$ the logic constructed by extending quantifier-free first-order logic with the quantifiers in $\mathfrak{Q}$ and allowing the numerical predicates in $\mathfrak{N}$.

   We denote by \emph{FO} the set of standard first-order quantifiers: $\{\exists, \forall\}$.
\end{definition}
For a singleton set of quantifiers $\mathfrak{Q} = \{Q\}$, we sometimes denote $(\mathfrak{Q})[\mathfrak{N}]$ as $(Q)[\mathfrak{N}]$. We use similar notation for the sets of numerical predicates. We use $\mathcal{L}((\mathfrak{Q})[\mathfrak{N}])$ to denote the languages expressible by the logic $(\mathfrak{Q})[\mathfrak{N}]$.  We also use $(\mathfrak{Q}_1)[\mathfrak{N}]$ to denote the logic obtained as a restriction of $(\mathfrak{Q})[\mathfrak{N}]$ to formulas in which quantifiers in $\mathfrak{Q}$ are only applied to interpretations of dimension $1$.

All the logics we consider are \emph{substitution closed} in the sense of~\cite{Ebb85}.  This means in particular that if a quantifier $Q$ is definable in a logic $(\mathfrak{Q})[\mathfrak{N}]$, then extending the logic with the quantifier $Q$ does not add to its expressive power.  This is because we can replace occurrences of the quantifier $Q$ by its definition, with a suitable substitution of the interpretation for the relation symbols.  Hence, if $Q$ is definable in $(\mathfrak{Q})[\mathfrak{N}]$, then $\mathcal{L}((\mathfrak{Q})[\mathfrak{N}]) = \mathcal{L}((\mathfrak{Q} \cup \{Q\})[\mathfrak{N}])$.

A remark is due on our notation for numerical predicates.  All structures we consider are ordered, including those defining the quantifiers.  Thus the order predicate is implicitly present in the collection of numerical predicates $\mathfrak{N}$ and is used (implicitly) to define the interpretations to a quantifier.  We sometimes write $(\mathfrak{Q})[\emptyset]$ to indicate a logic in which this is the only use of the order that is allowed.  By our choice of notation, the order symbol then does not appear explicitly in the syntax of the formulas.

\subsection{Multiplication Quantifiers}

The definition of multiplication quantifier has its origin in Barrington, Immerman, and Straubing \cite[Section 5]{barrington1990uniformity} where they were referred to as monoid quantifiers; the authors proved that the languages in \textsc{DLogTime}-uniform NC${}^1$ are exactly those expressible by first-order logic with quantifiers whose truth-value is determined via multiplication in a finite semigroup.  The notion was extended by Lautemann et al.~\cite{lautemann2001descriptive} to include quantifiers for the word problem over more general algebras with a binary operation.  Multiplication quantifiers over a finite semigroup $S$ can be understood as generalized quantifiers corresponding to languages recognized by $S$, and here we define them as such.

Fix a semigroup $S$, a set $B \subseteq S$ and a positive integer $k$.  Let $\Sigma_k$ denote the set $\{0,1\}^k$ which we think of as an alphabet of size $2^k$, and fix a function $\gamma: \Sigma_k \rightarrow S$.  We extend $\gamma$ to strings in $\Sigma_k^+$ inductively in the standard way: $\gamma(wa) = \gamma(w)\gamma(a)$.  Together these define a language
$$L^{S,B}_{\gamma} = \{ x \in \Sigma_k^* \mid \gamma(x) \in B\}.$$
We can now define a \emph{multiplication quantifier}.  In the following, $\mathcal{S}_L$ denotes the class of structures associated with a language $L$ in the sense of Definition~\ref{def:associated-lang}.
\begin{definition}\label{def:multquant}
Let $\tau$ be a vocabulary including an order symbol $<$ and $k$ unary relations.
For a semigroup $S$, a set $B \subseteq S$, a positive integer $k$ and a function $\gamma: \{0,1\}^k \rightarrow S$, the \emph{multiplication quantifier} $\Gamma_{\gamma}^{S,B}$ is the Lindstr\"om quantifier associated with the class of structures $\mathcal{S}_{L^{S,B}_{\gamma}}$.

We also write $\Gamma_{d,\gamma}^{S,B}$ for the vectorization of this quantifier of dimension $d$. If $B$ is a singleton $\{s\}$, then we often write $\Gamma^{S,s}_{d,\gamma}$ for short.
\end{definition}

Recall that $U_1$ denotes the two-element semigroup $\{0,1\}$ with standard multiplication.  Then, it is easily seen that $\Gamma^{U_1,0}_{1,\gamma}$,  where $\gamma : \{0,1\} \rightarrow U_1$ such that $\gamma(0) = 1$ and $\gamma(1) = 0$, is the standard existential quantifier.  The universal quantifier can be defined similarly.


\begin{definition}
    For a semigroup $S$, we define the following collections of quantifiers: 
    \begin{align*}
        \Gamma^S &= \left\{\Gamma^{S,B}_{l,\gamma} \mid B \subseteq S \text{, } \gamma : \{0,1\}^k \rightarrow S \text{, and } l,k \geq 1\right\}\\
        \Gamma^S_{l} &= \left\{\Gamma^{S,B}_{l,\gamma} \mid B \subseteq S \text{ and } \gamma : \{0,1\}^k \rightarrow S\right\}\\
        \Gamma^S_{l,\gamma} &= \left\{\Gamma^{S,B}_{l,\gamma} \mid B \subseteq S\right\}
    \end{align*}
    Finally, let $\Gamma^{\fin}$ be the collection of all multiplication quantifiers over finite semigroups.
\end{definition}

From \cite[Corollary 9.1]{barrington1990uniformity}, we know that $\text{\textsc{DLogTime}-uniform NC${}^1$}$ is characterized by $(\text{FO})[+,\times]$ equipped with finite multiplication quantifiers:

\begin{theorem}[\cite{barrington1990uniformity}]\label{thm:logfornc1}
    $\emph{\textsc{DLogTime}-uniform NC${}^1$} = \mathcal{L}((\Gamma^{\fin})[+,\times])$.
\end{theorem}

% include in this remark that we don't actually need for the exposition what a non-solvable monoid is but S5 will do
\begin{remark}\label{thm:s5logfornc1}
    In fact, simply allowing multiplication quantifiers for some fixed finite, non-solvable monoid suffices.  The definition of ``non-solvable monoid'' is not needed for our proofs here but, for example, the \emph{symmetric group of degree five}, denoted $S_5$, is a non-solvable monoid. Therefore, we know that $\text{\textsc{DLogTime}-uniform NC${}^1$} = \mathcal{L}((\text{FO}\cup\Gamma^{S_5})[+,\times])$.
\end{remark}

In the absence of the arithmetic predicates for addition and multiplication, the logic of multiplication quantifiers over finite semigroups only allows us to define regular languages.  Specifically, Barrington et al.~\cite{barrington1990uniformity} established that the regular languages are characterized by the logic using such quantifiers with only unary interpretations.
We denote this logic $(\Gamma^{\fin}_1)[<])$.
\begin{theorem}[\cite{barrington1990uniformity}]\label{thm:fologforreg}
    \emph{\textsc{Reg}} $= \mathcal{L}((\Gamma^{\fin}_1)[<])$.
\end{theorem}
\noindent Later, Lautemann et al.~\cite[Theorem 5.1]{lautemann2001descriptive} showed that allowing interpretations of higher dimension to the quantifiers does not increase the expressive power when order is the only numerical predicate.
\begin{theorem}\label{thm:unaryfologforreg}
    \emph{\textsc{Reg}} $= \mathcal{L}((\Gamma^{\fin})[<])$.
  \end{theorem}

Our main technical result shows that this is true even in the presence of numerical predicates and therefore $\Gamma^{\fin}$ can be replaced by $\Gamma^{\fin}_1$ even in Theorem~\ref{thm:logfornc1}.  

% TODO mention in meeting:
% defining L(logic)
% clarify string-to-string transducers comment and where to mention Lindstrom quantifiers over strings
% maybe add more explaining the vecotrization of the multiplication quantifier, i.e., mention the 2-degree vectorization of it leads to a string of length n^2

% for second proof later: vectorization can be replaced by nesting

\subsection{Typed Semigroups}\label{sec:backgroundtyped}

In this subsection, we review the definitions and results from~\cite{REF1,REF2} on typed semigroups, their relationship to languages and corresponding characterizations of complexity classes.

A typed semigroup is a semigroup equipped with a collection of \emph{types}, which form a Boolean algebra, and a set of \emph{units}.  We only deal with concrete Boolean algebras, given as collections of subsets of a fixed universe.

\begin{definition}[Boolean Algebra]
    A \emph{Boolean algebra} over a set $S$ is a set $B \subseteq \wp(S)$ such that $\varnothing, S \in B$ and $B$ is closed under union, intersection, and complementation. If $B$ is finite, we call it a \emph{finite} Boolean algebra.

    We call $\varnothing$ and $S$ the \emph{trivial elements} (or in some contexts, the \emph{trivial types}) of $B$.
\end{definition}

A homomorphism between Boolean algebras is defined as standard.  That is, if $B_1$ and $B_2$ are Boolean algebras over sets $S$ and $T$, respectively, then we call $h : B_1 \rightarrow B_2$ a \emph{homomorphism} if $h(\varnothing) = \varnothing$, $h(S) = T$, and for all $s_1, s_2 \in B_1$, $h(s_1 \cap s_2) = h(s_1) \cap h(s_2)$, $h(s_1 \cup s_2) = h(s_1) \cup h(s_2)$, and $h(s^C) = (h(s))^C$.
Now we are ready to define typed semigroups.

\begin{definition}[Typed Semigroup]
    Let $S$ be a semigroup, $G$ a Boolean algebra over $S$, and $E$ a finite subset of $S$. We call the tuple $T = (S, G, E)$ a \emph{typed semigroup over $S$} and the elements of $G$ \emph{types} and the elements of $E$ \emph{units}. We call $S$ the \emph{base semigroup} of $T$. If $S$ is a monoid or group, then we may also call $T$ a \emph{typed monoid} or \emph{typed group}, respectively.

    If $G = \{\varnothing, A, S - A, S\}$, then we often abbreviate $T$ as $(S, A, E)$, i.e., the Boolean algebra is signified by an element, or elements, which generates it---in this case, $A$. 
\end{definition}
We say that a typed semigroup $(S,G,E)$ is finite if $S$ is.

We also need a notion of morphism between typed semigroups.
\begin{definition}\label{def:typedhom}
    A \emph{typed homomorphism} $h : (S, G, E) \rightarrow (T, H, F)$ of typed semigroups is a triple $(h_1, h_2, h_3)$ where $h_1 : S \rightarrow T$ is a semigroup homomorphism, $h_2 : G \rightarrow H$ is a homomorphism of Boolean algebras, and $h_3 : E \rightarrow F$ is a mapping of sets such that the following conditions hold:
    \begin{enumerate}[\ \ \ \ (i)]
        \item For all $A \in G$, $h_1(A) = h_2(A) \cap h_1(S)$.
        \item For all $e \in E$, $h_1(e) = h_3(e)$.
    \end{enumerate}
\end{definition}
Note that $h_3$ is redundant in the definition as it is completely determined by $h_1$.  We retain it as part of the definition for consistency with~\cite{REF}.

To motivate the definitions, recall that a language $L \subseteq \Sigma^*$ is recognized by a semigroup $S$ if there is a homomorphism $h: \Sigma^* \rightarrow S$ and a set $B \subseteq S$ such that $L = h^{-1}(B)$.  When the semigroup $S$ is infinite, the languages recognized form a rather rich collection and we aim to restrict this in two ways.  First, $B$ cannot be an arbitrary set but must be an element of the algebra of types.  Secondly, the homomorphism $h$ must map the letters in $\Sigma$ to units of the typed semigroup.  Formally, we have the following definition.
\begin{definition}\label{def:langrecognitiontyped}
    A typed semigroup $T = (S, G, E)$ \emph{recognizes} a language $L \subseteq \Sigma^+$ if there exists a typed homomorphism from $(\Sigma^+, L, \Sigma)$ to $T$. We let $\mathcal{L}(T)$ denote the set of languages recognized by $T$.
\end{definition}

When the base semigroup of a typed semigroup is finite, we recover the classical definition of a recognition.  Hence, the languages recognized by finite typed semigroup are necessarily regular.
\begin{proposition}
    If $T$ is a finite typed semigroup, then $\mathcal{L}(T) \subseteq \emph{\textsc{Reg}}$.
\end{proposition}

We can now state the definitions of the key relationships between typed semigroups.

\begin{definition}
    Let $(S, G, E)$ and $(T, H, F)$ be typed semigroups.
    \begin{itemize}
        \item A typed homomorphism $h = (h_1, h_2, h_3) : (S, G, E) \rightarrow (T, H, F)$ is \emph{injective} (\emph{surjective}, or \emph{bijective}) if all of $h_1$, $h_2$, and $h_3$ are.
        \item $(S, G, E)$ is a \emph{typed subsemigroup} (or, simply, ``subsemigroup'' when context is obvious) of $(T, H, F)$, denoted $(S, G, E) \leq (T, H, F)$, if there exists an injective typed homomorphism $h : (S, G, E) \rightarrow (T, H, F)$.
        \item $(S, G, E)$ divides $(T, H, F)$, denoted $(S, G, E) \preceq (T, H, F)$, if there exists a surjective  typed homomorphism from a typed subsemigroup of $(T, H, F)$ to $(S, G, E)$.
        \iffalse TODO: remove before submission
            \item A  typed semigroup $(S, G', E)$ is a \emph{shift} of $(S, G, E)$ if there exist $p,q \in S$, with \[G' = \{\{s \in S \mid psq \in A\} \mid A \in G\}.\]
            \item Let $E' \subseteq S$ be any finite set. Then, we call $(S, G, E')$ a \emph{unit relaxation} of $(S, G, E)$.
        \fi
    \end{itemize}
\end{definition}

These have the expected properties.
\begin{proposition}[\cite{behle2011typed}]\label{prop:typedsemigroupprops}
    Let $T_1$, $T_2$, and $T_3$ be typed semigroup.
    \begin{itemize}
        \item Typed homomorphisms are closed under composition.
        \item Division is transitive: if $T_1 \preceq T_2$ and $T_2 \preceq T_3$, then $T_1 \preceq T_3$.
        \item If $T_1 \preceq T_2$, then $\mathcal{L}(T_1) \subseteq \mathcal{L}(T_2)$.
    \end{itemize}
\end{proposition}

We can formulate the notion of the \emph{syntactic typed semigroup} of a language $L$ as an extension of the syntactic semigroup of $L$ with a minimal collection of types and units necessary.
\begin{definition}\label{def:typedcongmin}
    Let $T = (S, G, E)$ be a typed semigroup. A congruence $\sim$ over $S$ is a \emph{typed congruence over $T$} if for every $A \in G$ and $s_1,s_2\in S$, if $s_1 \sim s_2$ and $s_1 \in A$, then $s_2 \in A$.

    For a typed congruence $\sim$ over $T$, let
    \begin{align*}
        S'/{\sim} &= \{[x]_\sim \mid x \in S'\} \text{ where $S' \subseteq S$}\\
        G/{\sim} &= \{A/{\sim} \mid A \in G\}\\
        E/{\sim} &= \{[x]_\sim \mid x \in E\}.
    \end{align*}
    \noindent Then, $T/{\sim} := (S/{\sim}, G/{\sim}, E/{\sim})$ is the \emph{typed quotient semigroup of $T$ by $\sim$}.

    Let $\sim_T$ denote the typed congruence on $T$ such that for $s_1,s_2 \in S$, $s_1 \sim_T s_2$ iff for all $x,y \in S$ and $A \in G$, $xs_1y \in A$ iff $xs_2y \in A$. We then refer to the quotient semigroup $T/{\sim_T}$ as the \emph{minimal reduced semigroup of $T$}.
\end{definition}

Recall that ${\sim_L}$ is the syntactic congruence of $L$, defined in Definition \ref{def:syncong}.
\begin{definition}
    For a language $L \subseteq \Sigma^+$, the \emph{syntactic typed semigroup of $L$}, denoted $\emph{syn}(L)$, is the typed semigroup $(\Sigma^+, L, \Sigma)/{\sim_L}$. 
\end{definition} 
    We also get the \emph{canonical typed homomorphism}, $\eta_d : (\Sigma^+, L, \Sigma) \rightarrow \emph{syn}(L)$ induced by the syntactic homomorphism of $L$.


We now turn to the relationship between the expressive power of logics with multiplication quantifiers and typed semigroups.  A formal association is defined through the definition below.

\begin{definition}\label{def:origtypedquantsemi}
    For a multiplication quantifier $Q=\Gamma^{S,B}_{\gamma}$ where $\gamma : \{0,1\}^k \rightarrow S$, we define the \emph{typed quantifier semigroup} of $Q$, denoted $\mathcal{S}(Q)$, to be the syntactic typed semigroup of the language $L^{S,B}_{\gamma}$.  
\end{definition}

It turns out that we can give a purely structural characterization of those typed semigroups that are syntactic semigroups.

\begin{proposition}[\cite{krebs2008typed}]
    A typed semigroup is the syntactic semigroup of a language if, and only if, it is reduced, generated by its units, and has four or two types.

In case it has just two types, then it only recognizes the empty language or the language of all strings.
\end{proposition}

We now want to state the formal connection between the languages expressible in a logicwith a collection of quantifiers and the corresponding class of typed semigroups.  For this we need the notion of the \emph{ordered strong block product closure} of a set of typed semigroups $T$, which we denote $\mathrm{sbpc}_<(T)$.  The definition is technical and can be found in~\cite{krebs2008typed} and is also reproduced in the appendix for ease of reference.

From \cite[Theorem 4.14]{krebs2008typed}, we then get the following relationship between logics and algebras:\footnote{The theorem in \cite{krebs2008typed} is actually more general as it accounts for more predicates than just order; however, for our purposes, order alone suffices.}
\begin{theorem}\label{thm:logcircalgequiv}
     Let $\mathfrak{Q}$ be a collection of quantifiers and $\bm{Q}$ the corresponding set of typed quantifier semigroups for $\mathfrak{Q}$. Then, \(
        \mathcal{L}((\mathfrak{Q}_1)[<]) = \mathcal{L}(\emph{sbpc}_<(\bm{Q}))
    \).
\end{theorem}

\section{Simplifying Multiplication Quantifiers}\label{sec:mult}

To use Theorem~\ref{thm:logcircalgequiv} to obtain an algebraic characterization of $\NC^1$, we need to characterize this class in a logic with only unary quantifiers, i.e.\ where quantifiers are only applied to unary interpretations.  Remark~\ref{thm:s5logfornc1} gives us a characterization using first-order quantifiers and $\Gamma^{S_5}$.  Our aim in this section is to show that we can eliminate the use of interpretations of dimension higher than $1$ in this logic.  As a first step, we show that we can restrict ourselves to quantifiers $\Gamma^{{S_5},s}_{\delta}$ for a \emph{fixed} function $\delta$.

\begin{lemma}\label{lem:finitetuple}
    For every finite semigroup $S$, there exists a function $\delta : \{0,1\}^{|S|} \rightarrow S$ such that for every $s \in S$ and $\gamma : \{0,1\}^k \rightarrow S$, the quantifier $\Gamma^{S,s}_{\gamma}$ is definable in $(\Gamma^{S,s}_{\delta})[\varnothing]$.
  \end{lemma}
  \begin{proof}
    Recall that $\Gamma^{S,s}_{\gamma}$ is the class of structures $\str{A}$ in a vocabulary $\tau$ with one binary relation $<$ and $k$ unary relations $R_1,\ldots,R_k$ such that $\gamma(w_{\str{A}}) = 1$ where $w_{\str{A}}$ is the string associated with $\str{A}$ as in Def.~\ref{def:associated}.

        Let $c = |S|$, fix an enumeration $\{s_1,\ldots,s_c\}$ of $S$ and let $z$ be an arbitrary element of $S$.  Let $\delta : \{0,1\}^c \rightarrow S$ be the function where $\delta(w) = s_i$ if $w$ is the one-hot encoding of $i$ and $\delta(w) = z$ otherwise (that is, if the number of occurrences of the symbol $1$ in the string $w$ is not exactly one).

        For each $t \in S$, define the formula $\psi_t(x)$ as follows:
        $$ \psi_t(x) : = \bigvee_{w \in \{0,1\}^k : \gamma(w) = t} \left( \bigwedge_{i \in [k] : w_i = 1} R_i(x) \land \bigwedge_{i \in [k] : w_i = =} \neg R_i(x) \right).$$

          It is easy to see that in a $\tau$-structure $\str{A}$, we have $\str{A} \models \psi_t[a]$ if, and only if, the $a$th element of $w_{\str{A}}$ is mapped by $\gamma$ to $t$.  Thus, in particular, the formulas $\psi_{s_1},\ldots,\psi_{s_c}$ define disjoint sets that partition the universe of $\str{A}$.  We now claim that the quantifier $\Gamma^{S,s}_{\gamma}$ is defined by the formula:
          $$ \Gamma^{S,s}_{\delta}(\psi_{s_1}\ldots,\psi_{s_c}).$$

          To see this, let $I$ denote the unary interpretation $(\psi_{s_1}\ldots,\psi_{s_c})$ so that $w_{I(\str{A})}$ is a string over $\{0,1\}^c$.  Moreover, by the fact that the sets defined by the formulas $\psi_{s_1},\ldots,\psi_{s_c}$ partition $|\str{A}|$ it follows that each letter of $w_{I(\str{A})}$ is a vector in $\{0,1\}^c$ with exactly one $1$.  Indeed, the $a$ element of $w_{I(\str{A})}$ is the one-hot encoding of $i$ precisely if $\str{A} \models \psi_{s_i}[a]$.  Since $\delta$ takes the one-hot encoding of $i$ to $s_i$, we have for any $a \in |\str{A}|$
          \begin{align*}
            & \delta((w_{I(\str{A})})_a)  =  s_i \\
            \text{iff} & \str{A} \models\psi_i[a] \\
            \text{iff} & \gamma((w_{\str{A}}))_a) = s_i.
          \end{align*}
Hence, $\delta(w_{I(\str{A})}) = \gamma(w_{\str{A}})$ and therefore $I(\str{A}) \in \Gamma^{S,s}_{\delta}$ if, and only if $\str{A} \in \Gamma^{S,s}_{\gamma}$ as required.
        
  \end{proof}

  


% We aim to construct an algebraic characterization of \textsc{DLogTime}-uniform NC${}^1$ by taking advantage of Theorem \ref{thm:logcircalgequiv}. To do so, however, we need a logic which characterizes \textsc{DLogTime}-uniform NC${}^1$ using only unary first-order quantifiers.

% Now, from Remark \ref{thm:s5logfornc1}, we know of a logic containing non-unary first-order quantifiers:
% \begin{equation*}\label{eq:foo1}
%     \text{\textsc{DLogTime}-uniform NC${}^1$} = \mathcal{L}((\text{FO} \cup \Gamma^{S_5})[+,\times])
% \end{equation*} To take us a step closer to applying Theorem \ref{thm:logcircalgequiv}, we will prove that we can substitute multiplication quantifiers of higher dimension with unary ones, therefore proving that having unary quantifiers alone suffices to express the same languages: \[
%     \mathcal{L}((\text{FO} \cup \Gamma^{S_5})[+,\times]) = \mathcal{L}((\text{FO} \cup \Gamma^{S_5}_1)[+,\times]),
% \] Answering a question left open in \cite{lautemann2001descriptive}.

% While we only need to show an equivalence of $(\emph{FO} + \Gamma^{S_5})[+,\times]$ and $(\emph{FO} + \Gamma^{S_5}_1)[+,\times]$ at the language level---i.e., that they express the same languages---we will actually prove the stronger claim that for every finite semigroup $S$, all quantifiers in $\Gamma^{S}$ are definable in $(\Gamma^S_1)[\varnothing]$. In other words, we will prove that any use of $\Gamma^{S}$ quantifiers may be substituted by a $(\Gamma^S_1)[\varnothing]$ formulae without loss or gain in expressive power. Moreover, we will prove that we don't need an infinite number of quantifiers to express \textsc{DLogTime}-uniform NC${}^1$. Simply a finite set of multiplication quantifiers binding one variable and extending over $k$-tuples (for some fixed $k$) will suffice.

% We first prove that we can fix the size of the tuple over which the quantifier acts:

% %For any finite semigroup $S$, there exists a fixed alphabet $\Sigma$ such that if $Q = \{\mathfrak{A} \mid w_\mathfrak{A} \in L\}$ where $L$ is a language recognized by $S$, 

% \begin{lemma}\label{lem:finitetuple}
%     For every finite semigroup $S$, there exists a function $\delta : \{0,1\}^c \rightarrow S$ such that for every $s \in S$, $d \in \mathbb{N}$, and $\gamma : \{0,1\}^k \rightarrow S$, the quantifier $\Gamma^{S,s}_{d,\gamma}$ is definable in $(\Gamma^{S,s}_{d,\delta})[\varnothing]$.
% \end{lemma}

% \begin{proof}
%     Let $S$ be an arbitrary finite semigroup. 
    
%     To fix the tuple size, we will increase the tuple size so that each element $s \in S$ may be associated with a unique element of $v \in \{0,1\}^c$ and set $\delta(v) = s$. We will then construct the formulas $\psi_1(\tup{x}),\dots,\psi_c(\tup{x})$ defining the interpretation $I_\delta$ of $\Gamma^{S,s}_{d,\delta}\tup{x}(\psi_1(\tup{x}), \dots, \psi_c(\tup{x}))$ in such a way that for the interpretation $I_\gamma$ of $\Gamma^{S,s}_{d,\gamma}\tup{x}(P_1,\dots,P_k)$, structure $\mathfrak{A}$, and assignment $\alpha$, $\gamma(w_{I_\gamma(\mathfrak{A},\alpha)}) = s = \delta(w_{I_\delta(\mathfrak{A},\alpha)})$ and the letters of $w_{I_\delta(\mathfrak{A}, \alpha)}$ are only from the subset of $\{0,1\}^c$ consisting of the unique elements used to construct $\delta$. 

%     To construct $\delta$, we will let $c = |S|$ be the size of the tuples over which $\delta$ acts and we'll use one-hot encodings to associate each element of $S$ with an element in the domain of $\delta$. Let $z \in S$ be fixed and arbitrary. Say that $S = \{s_1, \dots, s_c\}$. Let $\delta : \{0,1\}^c \rightarrow S$ such that if $w \in \{0,1\}^c$ is a one-hot encoding of $i$ where $1 \leq i \leq c$, then $\delta(w) = s_i$; else, $\delta(w) = z$. For example, if $|S| = 3$, then $\delta(100) = s_1$, $\delta(010) = s_2$, $\delta(001) = s_3$, $\delta(110) = \delta(000) = z$, etc. Note that $z$ is simply used to ensure that $\delta$ is total; the construction of our formulas $\psi_1,\dots,\psi_c$ bound by the multiplication quantifier using $\delta$ will ensure that no non-one-hot encoding in $\{0,1\}^c$ is ever passed into $\delta$ during evaluation of the quantifier.

%     Now that we've defined $\delta$, let $s \in S$, $d \in \mathbb{N}$, and $\gamma : \{0,1\}^k \rightarrow S$ be arbitrary. Let $\tau = \{P_1^{(d)}, \dots, P_k^{(d)}$\} be a relational vocabulary. We will now show that $\Gamma^{S,s}_{d,\gamma}$ is definable in $(\Gamma^{S,s}_{d,\delta})[\varnothing]$.

%     Specifically, we will now show that for \[
%         \Phi_1 := \Gamma^{S,s}_{d,\gamma}\overline{x}( P_1 \overline{x}, \dots, P_k \overline{x_d})
%     \] there exists a $\tau$-sentence \[
%         \Phi_2 := \Gamma^{S,s}_{d,\delta}\overline{x}( \psi_1(\overline{x}), \dots, \psi_c(\overline{x_d})),
%     \] where each $\psi_i$ is a boolean combination of $P_1,\dots,P_k$,
%     such that \(
%         \text{Mod}(\Phi_1) = \text{Mod}(\Phi_2)
%     \).
    
%     We now construct $\psi_1, \dots, \psi_c$ so that for each structure $\mathfrak{A}$, assignment $\alpha$, and all $\tup{a} \in |\mathfrak{A}|^d$, if $\gamma(P^{\mathfrak{A},\alpha}_1[\overline{a}] \circ \cdots \circ P^{\mathfrak{A},\alpha}_k[\overline{a}]) = s_j$, then $\psi_j[\overline{a}] = 1$ and $\psi_i[\overline{a}] = 0$ for all $i \neq j$. Thus, $\psi_1^{\mathfrak{A},\alpha}[\overline{a}] \circ \cdots \circ \psi_c^{\mathfrak{A},\alpha}[\overline{a}]$ will be the one-hot encoding of $s_j$, causing the application of $\delta$ to output $s_j$.

%     Let $\gamma^P$ be a map from $S$ to sets of boolean combinations of $P_1,\dots,P_k$ such that if $w_1\dots w_k \in \{0,1\}^k$ maps to $s$ under $\gamma$, then $P'_1 \wedge \dots \wedge P'_k \in \gamma^P(s)$ where $P'_i = P_i \overline{x}$ if $w_i = 1$ and $P'_i = \neg P_i \overline{x}$ if $w_i = 0$. For example, if $S = \{s_1, s_2, s_3\}$, $k=2$, $\gamma(00) = \gamma(10) = \gamma(01) = s_1$, and $\gamma(11) = s_3$, then $\gamma^P(s_1) = \{\neg P_1\overline{x} \wedge \neg P_2\overline{x}, P_1\overline{x} \wedge \neg P_2\overline{x}, \neg P_1\overline{x} \wedge P_2\overline{x}\}$, $\gamma^P(s_2) = \varnothing$, and $\gamma^P(s_3) = \{P_1\overline{x} \wedge P_2\overline{x}\}$. We then set \[\psi_i := \bigvee_{\phi \in \gamma^P(s_i)} \phi.\] By construction since $\gamma$ is a total function, observe that for every structure, there will be \emph{exactly} one $i$ such that $\psi_i$ evaluates to true. We have now defined $\psi_1, \dots, \psi_c$ and, thus, $\Phi_2$.
    
%     We now show that $\text{Mod}(\Phi_1) = \text{Mod}(\Phi_2)$.

%     Let $\mathfrak{A}$ be an arbitrary $\tau$-structure and $\alpha$ a variable assignment. Because we are operating over dimension $d$, the length of $w_{I_\gamma(\mathfrak{A},\alpha)}$ is $||\mathfrak{A}||^d$. 
    
%     We first aim to prove that $\gamma((w_{I_\gamma(\mathfrak{A},\alpha)})_i) = \delta((w_{I_\delta(\mathfrak{A},\alpha)})_i)$ for all $i \in [||\mathfrak{A}||^d]$. Call this proposition $(\star)$. Let $i \in [||\mathfrak{A}||^d]$ and $s_j \in S = \{s_1, \dots, s_c\}$ be arbitrary. Let $\tup{a}$ be a tuple of length $d$ and denote the base-$||\mathfrak{A}||$ encoding of $i$. Then,
%     \begin{align*}
%         &\gamma((w_{I_\gamma(\mathfrak{A},\alpha)})_i) = s_j \\
%         \text{ iff } &\gamma(P^{\mathfrak{A},\alpha}_1[\overline{a}] \circ \cdots \circ P^{\mathfrak{A},\alpha}_k[\overline{a}]) = s_j &\text{by definition of $w_{I_\gamma(\mathfrak{A},\alpha)}$}\\
%         \text{ iff } &\psi^{\mathfrak{A},\alpha}_j[\overline{a}] = 1 &\text{by construction of $\psi_j$}\\
%         \text{ iff } &\delta(\psi^{\mathfrak{A},\alpha}_1[\overline{a}] \circ \cdots \circ \psi^{\mathfrak{A},\alpha}_c[\overline{a}]) = s_j &\text{by construction of $\delta$}\\
%         \text{ iff } &\delta((w_{I_\delta(\mathfrak{A},\alpha)})_i) = s_j &\text{by definition of $\delta((w_{I_\delta(\mathfrak{A},\alpha)})_i)$}
%     \end{align*}
%     Because $s_i$ was arbitrary, it follows that $\gamma((w_{I_\gamma(\mathfrak{A},\alpha)})_i) = \delta((w_{I_\delta(\mathfrak{A},\alpha)})_i)$.
%     We will use this fact to help prove that $\Phi_1$ and $\Phi_2$ have the same models:
%     \begin{align*}
%         &\mathfrak{A} \models \Phi_1\ [\alpha]&\\
%         \text{iff}\ &w_{I_\gamma(\mathfrak{A},\alpha)} \in L^{S,s}_\gamma &\text{by definition of $\Gamma^{S,s}_{d,\gamma}$}\\
%         \text{iff}\ &\gamma(w_{I_\gamma(\mathfrak{A},\alpha)}) = s&\text{by definition of $L^{S,s}_\gamma$}\\
%         \text{iff}\ &\prod_{1 \leq i \leq ||\mathfrak{A}||^d} \gamma((w_{I_\gamma(\mathfrak{A},\alpha)})_i) = s&\text{because $\gamma$ is a homomorphism}\\
%         \text{iff}\ &\prod_{1 \leq i \leq ||\mathfrak{A}||^d} \delta((w_{I_\delta(\mathfrak{A},\alpha)})_i) = s&\text{by $(\star)$}\\
%         \text{iff}\ &\delta(w_{I_\delta(\mathfrak{A},\alpha)}) = s&\text{because $\delta$ is a homomorphism}\\
%         \text{iff}\ &w_{I_\delta(\mathfrak{A},\alpha)} \in L^{S,s}_\delta &\text{by definition of $L^{S,s}_\delta$}\\
%         \text{iff}\ &\mathfrak{A} \models \Phi_2\ [\alpha]&\text{by definition of $\Gamma^{S,s}_{l,\delta}$}
%     \end{align*}
%     We have now proved that $\text{Mod}(\Phi_1) = \text{Mod}(\Phi_2)$.
% \end{proof}

We now prove that having quantifiers binding only one variable is sufficient:
\iffalse
\begin{theorem}
    For any finite semigroup $S$, if $Q = \{\mathfrak{A} \mid w_\mathfrak{A} \in L\}$ where $L$ is a language recognized by $S$, then for any sentence $Q_d(\varphi_1, \dots, \varphi_k)$, there is an 
\end{theorem}
\fi

\begin{theorem}\label{thm:finitebinding}
    For every finite semigroup $S$, there exists a function $\delta : \{0,1\}^c \rightarrow S$ such that for every $s \in S$, $d \in \mathbb{N}$, and $\gamma : \{0,1\}^k \rightarrow S$, the quantifier $\Gamma^{S,s}_{d,\gamma}$ is definable in $(\Gamma^{S}_{1,\delta})[\varnothing]$.
\end{theorem}
\begin{proof}
    Let $S = \{s_1, \dots, s_c\}$ be an arbitrary finite semigroup and let $\delta : \{0,1\}^c \rightarrow S$ be constructed as done in Lemma \ref{lem:finitetuple}. Let $d \in \mathbb{N}$ and $\gamma : \{0,1\}^k \rightarrow S$ be arbitrary and let $\tau = \{P_1^{(d)}, \dots, P_k^{(d)}\}$ be a relational vocabulary. Finally, for each $s \in S$, let \[
        \Phi_1^s := \Gamma^{S,s}_{d,\gamma}\overline{x}(P_1 \overline{x}, \dots, P_k \overline{x})
    \] and $I_\gamma$ the interpretation of $\Phi^s_1$. We want to show that for each $s \in S$, there exists a $\tau$-sentence $\Phi_2^s$ in $(\Gamma^S_{1,\delta})[\varnothing]$ such that $\text{Mod}(\Phi_1^s) = \text{Mod}(\Phi_2^s)$. 
    
    We will approach this by taking our multiplication quantifier of dimension $d$ and ``unpacking'' it into a nesting of quantifiers of dimension one, with quantifier depth $d$. The evaluation of a $d$-dimensional quantifier may be viewed as being factored through the evaluation of each successive level of nesting. For example, a multiplication quantifier $\Gamma^{S,s}_{2,\gamma}$ with interpretation $I$ is evaluated in a structure $\mathfrak{A}$ and assignment $\alpha$ by checking whether $\gamma(w_{I(\mathfrak{A},\alpha)}) = s$. Because the quantifier has dimension two, the length of $w_{I(\mathfrak{A},\alpha)}$ is $||\mathfrak{A}||^2$. Instead of applying $\gamma$ to the entire tuple, we may first apply $\gamma$ to each consecutive $|\mathfrak{A}|$-length subword to obtain $|\mathfrak{A}|$ elements of $S$ which may then be multiplied together to obtain our result. Our outermost quantifier performs the multiplication of the $|\mathfrak{A}|$ elements, i.e., the intermediate results, while the innermost quantifier performs the multiplication of the elements of each subword. We will pass the intermediate result from the innermost quantifier to the outermost by encoding the result in the evaluation of the outermost quantifier's tuple of formulas. Because we don't know which element of $S$ the application of $\gamma$ to the subword will be, we need to ensure our tuple of large enough to encode any possible element of $S$. Thus, by fixing the tuple size using the same encoding as Lemma \ref{lem:finitetuple}, we may then pass the intermediate result of the innermost quantifier's multiplication to the outermost quantifier. We now go into the details of this construction.

    We proceed by induction on the dimension $d$. If $d=1$, then the result follows from Lemma \ref{lem:finitetuple}. Thus, assume that for each $s \in S$,
    \begin{align*}
        \text{$\Gamma^{S,s}_{d-1,\gamma}$ is definable in $(\Gamma^{S}_{1,\delta})[\varnothing]$.}\tag{I.H.}
    \end{align*}
    We now show that for each $s \in S$, $\Gamma^{S,s}_{d,\gamma}$ is definable in $(\Gamma^{S}_{1,\delta})[\varnothing]$.

    \iffalse
    By Lemma \ref{lem:finitetuple}, we know that there is a sentence of the form \[
        \Phi_1' := \Gamma^{S,s}_{d,\delta}\overline{x_l}\langle \psi_1(\overline{x_l}), \dots, \psi_c(\overline{x_l})\rangle,
    \] where each $\psi_i$ is a boolean combination of $P_1,\dots,P_k$, such that $\text{Mod}(\Phi_1) = \text{Mod}(\Phi_1')$.
    \fi

    Let $s \in S$ be arbitrary. We now construct a sentence $\Phi^s$ and prove that $\text{Mod}(\Phi_1^s) = \text{Mod}(\Phi^s)$; we will then use the inductive hypothesis to convert $\Phi^s$ into a sentence $\Phi_2^s$ in $(\Gamma^S_{1,\delta})[\varnothing]$ such that $\text{Mod}(\Phi^s) = \text{Mod}(\Phi_2^s)$. Let \[
        \Phi^s := \Gamma^{S,s}_{1,\delta}x_1( \theta_1(x_1), \dots, \theta_c(x_1))
    \] where \[
        \theta_i (x_1) := \Gamma^{S,s_i}_{d-1,\gamma}x_2\dots x_d( P_1 x_1x_2\dots x_d, \dots, P_k x_1x_2\dots x_d)
    \]

    Let $\mathfrak{A}$ be an arbitrary $\tau$-structure and $\alpha$ a variable assignment. Let $I_\delta$ be the interpretation of $\Phi^s$ and $I^i_\gamma$ denote the interpretation of $\theta_i$. To show that $\text{Mod}(\Phi^s_1) = \text{Mod}(\Phi^s)$, we will show that $\gamma(w_{I_\gamma(\mathfrak{A},\alpha)}) = \delta(w_{I_\delta(\mathfrak{A},\alpha)})$.
    
    First, note that $w_{I_\gamma(\mathfrak{A},\alpha)}$ is of length $||\mathfrak{A}||^d$ while $w_{I_\delta(\mathfrak{A},\alpha)}$ is of length $||\mathfrak{A}||$. Also, by construction of $\theta_1, \dots, \theta_c$, we get that \begin{align*}
        \text{for every $a \in |\mathfrak{A}|$, if $\theta_i^{\mathfrak{A},\alpha}[a] = \theta_j^{\mathfrak{A},\alpha}[a] = 1$, then $i = j$}\tag{$\star$}
    \end{align*} since each $\theta_i$ will perform the same multiplication within $S$ during evaluation but each $\theta_i$ will check if the product is equal to a different $s_i$. Then, for every $a \in [||\mathfrak{A}||]$ and $s_i \in S$,
    \begin{align*}
        &\delta((w_{I_\delta(\mathfrak{A},\alpha)})_a) = s_i \\
        \text{iff}\ &\delta(\theta_1^{\mathfrak{A},\alpha}[a]\circ \cdots\circ \theta_c^{\mathfrak{A},\alpha}[a]) = s_i &\text{by definition of $w_{I_\delta(\mathfrak{A},\alpha)}$}\\
        \text{iff}\ &\theta_i^{\mathfrak{A},\alpha}[a] = 1 &\text{by construction of $\delta$ and $(\star)$}\\
        \text{iff}\ &\gamma(w_{I^i_\gamma(\mathfrak{A},\alpha[a/x_1])}) = s_i&\text{by definition of $\theta_i$}
    \end{align*}
    Because $s_i$ was arbitrary, we get that
    \begin{align*}
        \delta((w_{I_\delta(\mathfrak{A},\alpha)})_a) = \gamma(w_{I^i_\gamma(\mathfrak{A},\alpha[a/x_1])})
    \end{align*}
    and, therefore,
    \begin{align*}
        &\mathfrak{A} \models \Phi^s\ [\alpha]\\
        \text{iff}\ &w_{I_\delta(\mathfrak{A},\alpha)} \in L^{S,s}_\delta &\text{by definition of $\Gamma^{S,s}_{d,\delta}$}\\
        \text{iff}\ &\delta(w_{I_\delta(\mathfrak{A},\alpha)}) = s &\text{by definition of $L^{S,s}_\delta$}\\
        \text{iff}\ &\prod_{1 \leq a \leq ||\mathfrak{A}||} \delta((w_{I_\delta(\mathfrak{A},\alpha)})_a) = s &\text{because $\delta$ is a homomorphism}\\
        \text{iff}\ &\prod_{1 \leq a \leq ||\mathfrak{A}||} \gamma(w_{I^i_\gamma(\mathfrak{A},\alpha[a/x_1])}) = s &\text{by above, where $i$ is s.t. $s_i = s$}\\
        \text{iff}\ &\prod_{1 \leq a \leq ||\mathfrak{A}||} \gamma(w_{I_\gamma(\mathfrak{A},\alpha[a/x_1])}) = s&\text{by definition of $I_\gamma$ and $I^i_\gamma$, and $s_i = s$}\\
        \text{iff}\ &\gamma(w_{I_\gamma(\mathfrak{A},\alpha)}) = s &\text{because $\gamma$ is a homomorphism}\\
        \text{iff}\ &w_{I_\gamma(\mathfrak{A},\alpha)} \in L^{S,s}_\gamma &\text{by definition of $L^{S,s}_\gamma$}\\
        \text{iff}\ &\mathfrak{A} \models \Phi^s_1\ [\alpha]&\text{by definition of $\Gamma^{S,s}_{d,\gamma}$}
    \end{align*}
    so $\text{Mod}(\Phi^s_1) = \text{Mod}(\Phi^s)$.

    By the I.H., we know that each quantifier $\Gamma^{S,s_i}_{d-1,\gamma}$ is definable in $(\Gamma^S_{1,\delta})[\varnothing]$. Therefore, we know that for each $\theta_i$, there exists a formula $\theta_i'$ in $(\Gamma^S_{1,\delta})[\varnothing]$ such that $\text{Mod}(\theta_i) = \text{Mod}(\theta_i')$. Thus, we can construct a sentence $\Phi_2^s$ by replacing each $\theta_i$ in $\Phi^s$ with $\theta_i'$; we immediately get that $\text{Mod}(\Phi^s) = \text{Mod}(\Phi_2^s)$. Therefore, we have constructed a sentence $\Phi_2^s$ in $(\Gamma^S_{1,\delta})[\varnothing]$ such that $\text{Mod}(\Phi_1^s) = \text{Mod}(\Phi_2^s)$. Since $s \in S$ was arbitrary, this completes the inductive step.

    All together, we get that for every $d \in \mathbb{N}$, $\gamma : \{0,1\}^k \rightarrow S$, and $s \in S$, the quantifier $\Gamma^{S,s}_{l,\gamma}$ is definable in $(\Gamma^{S}_{1,\delta})[\varnothing]$.

    %Observe that $\Gamma^{M',m}_{2,\gamma_c}$ performs a multiplication of $||\mathfrak{A}||^2$ elements of $M'$ and checks to see if it equals $m$. Each iteration of $\Gamma^{M',m}_{1,\gamma_c} x_1 \langle \dots \rangle$ in $\Phi_2$ performs a multiplication of $||\mathfrak{A}||$ elements of $M'$. \todo{finish}

\end{proof}

\begin{corollary}\label{cor:unarymqssuffice}
    For every finite semigroup $S$, there exists a function $\delta : \{0,1\}^c \rightarrow S$ such that for any set of quantifiers $\mathfrak{Q}$ and set of numerical predicates $\mathfrak{N}$,\[
        \mathcal{L}((\mathfrak{Q} \cup \Gamma^{S})[\mathfrak{N}]) = \mathcal{L}((\mathfrak{Q} \cup \Gamma^{S}_{1,\delta})[\mathfrak{N}])
    \]
\end{corollary}
\begin{remark}
    Because we are considering finite semigroups, we can always take disjunctions of the multiplication quantifiers which check if the product is equal to a single element of a semigroup in order to define multiplication quantifiers which check if the product is equal to any element of a specified subset of a semigroup.
\end{remark}
\begin{remark}
    Note that for a finite semigroup $S$, while $\Gamma^{S}$ and $\Gamma^{S}_1$ are infinite sets, $\Gamma^{S}_{1,\delta}$ is a finite set.
\end{remark}

Therefore, this gives us a logic characterizing \textsc{DLogTime}-uniform NC${}^1$ which not only uses unary quantifiers but also only has a finite number of quantifiers:
\begin{corollary}\label{cor:alogtimelogicbetter}
    There exists a $\delta : \{0,1\}^k \rightarrow S_5$ such that \[
        \emph{\textsc{DLogTime}-uniform NC${}^1$} = \mathcal{L}((\emph{FO} \cup \Gamma^{S_5}_{1,\delta})[+,\times])
    \]
\end{corollary}
\noindent This will simplify our construction of an algebra capturing \textsc{DLogTime}-uniform NC${}^1$.

Moreover, this theorem serves as an alternative proof of Theorem \ref{thm:unaryfologforreg} (\cite[Theorem 5.1]{lautemann2001descriptive}) which, unlike the original proof, does not rely on the use of automata:
\begin{corollary}\label{cor:reglogicbetter}
    \emph{\textsc{Reg}} $= \mathcal{L}((\Gamma^{\fin})[<]) = \mathcal{L}((\Gamma^{\fin}_1)[<])$.
\end{corollary}
\noindent and, furthermore, resolves an open question from \cite{lautemann2001descriptive}:
\begin{corollary}\label{cor:openquestionfromlautemann}
    $\mathcal{L}((\Gamma^{\fin})[+,\times]) = \mathcal{L}((\Gamma^{\fin}_1)[+,\times])$
\end{corollary}


\section{The Algebraic Characterization}\label{sec:alg}


Now that we have a first-order logic with only unary quantifiers capturing \textsc{DLogTime}-uniform NC${}^1$, we are closer to applying Theorem \ref{thm:logcircalgequiv} to construct an algebra for it. We now just need to convert the logic to a form whose only numerical predicate is $<$ without introducing any new non-unary quantifiers.

To do this, we first define two unary quantifiers. The quantifier \text{Maj} which is true if the majority of the assignments to the bound variable satisfy the formula. The quantifier \text{Sq} which is true if the number of assignments to the bound variable satisfying the formula is a positive square number. 

We note the following from the literature:
\begin{lemma}\label{lem:superhelperalogtime}
    \,
    \begin{enumerate}[\ \ \ \ (i)]
        \item \emph{\textsc{DLogTime}-uniform NC${}^1$} can compute majority.
        \item The quantifiers in \emph{FO} are definable in $(\emph{Maj})[<]$. (\cite[Theorem 3.2]{lange2004some})
        \item The numerical predicate $+$ is definable in $(\emph{Maj})[<]$. (\cite[Theorem 4.1]{lange2004some})
        \item The numerical predicate $\times$ is definable in $(\{\emph{Maj}, \emph{Sq}\})[<]$ and \emph{Sq} is definable in $(\emph{Maj})[<,+,\times]$. (cf. \cite[Theorem 2.3.f]{schweikardt2002expressive} and \cite[Section 2.3]{krebs2007characterizing})
    \end{enumerate}
\end{lemma}




\begin{theorem}\label{thm:algebraforalogtime}
    \[\text{\emph{\textsc{DLogTime}-uniform NC${}^1$}} = \mathcal{L}(\emph{sbpc}_<(\{(\mathbb{Z}, \mathbb{Z}^+, \pm 1), (\mathbb{N}, \mathbb{S}, \{0,1\}), (S_5, \wp(S_5), S_5)\})).\]
\end{theorem}
\begin{proof}
    Let $\delta : \{0,1\}^c \rightarrow S_5$ be as it was defined in Lemma \ref{lem:finitetuple}. Note that the typed quantifier semigroup for Maj is $(\mathbb{Z}, \mathbb{Z}^+, \pm 1)$, for Sq is $(\mathbb{N}, \mathbb{S}, \{0,1\})$, and for $\Gamma^{S_5,s}_{1,\delta}$ is $(S_5, \{s\}, S_5)$. Then,
    \begin{align*}
        \text{\textsc{DLogTime}-uniform NC${}^1$} &= \mathcal{L}((\text{FO} \cup \Gamma^{S_5})[+,\times])\text{ via \cite{barrington1990uniformity}}\\
        &=\mathcal{L}((\text{FO} \cup \Gamma^{S_5}_{1,\delta})[+,\times])\text{ via Corollary \ref{cor:alogtimelogicbetter}}\\
        &=\mathcal{L}((\Gamma^{S_5}_{1,\delta} \cup \{\text{Maj}, \text{Sq}\})[<])\text{ via Lemma \ref{lem:superhelperalogtime}}\\
        &=\mathcal{L}(\text{sbpc}_<(\{(\mathbb{Z}, \mathbb{Z}^+, \pm 1), (\mathbb{N}, \mathbb{S}, \{0,1\})\}\\
        &\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \cup \{(S_5, s, S_5) \mid s \in S_5\}))\\
        &\text{\ \ \ \ \ \ via Theorem \ref{thm:logcircalgequiv}}\\
        &= \mathcal{L}(\text{sbpc}_<(\{(\mathbb{Z}, \mathbb{Z}^+, \pm 1), (\mathbb{N}, \mathbb{S}, \{0,1\}), 
        (S_5, \wp(S_5), S_5)\}))\\
        &\text{\ \ \ \ \ \ since $\forall s \in S_5, (S_5, s, S_5) \preceq (S_5, \wp(S_5), S_5)$}\\
        &\text{\ \ \ \ \ \ and $\mathcal{L}((S_5, \wp(S_5), S_5)) \subseteq \textsc{Reg} \subseteq \textsc{ALogTime}$}
    \end{align*}
\end{proof}

\iffalse
TODO: remove before submission if not included
\begin{corollary}
    \textsc{ALogTime}'s unique pseudovariety is the pseudovariety generated by $\emph{sbpc}_<(\{(\mathbb{Z}, \mathbb{Z}^+, \pm 1), (\mathbb{N}, \mathbb{S}, \{0,1\}), (S_5, \wp(S_5), S_5)\})$.
\end{corollary}



\begin{remark}
    Note that this is the same construction as the algebra for \textsc{DLogTime}-uniform TC${}^0$ except for the addition of the typed semigroup $(S_5, \wp(S_5), S_5)$.
\end{remark}
\fi

\section{Conclusion}\label{sec:conc}

\todo{}


%%
%% Bibliography
%%

%% Please use bibtex, 

\bibliography{main}

\appendix

\section{Strong Block Product Closure}\label{app:bp}

\subsection{Weakly Closed Classes}

\begin{definition}[Direct Product of Semigroups]
    The \emph{direct product} of two semigroups $(S, \cdot_S)$ and $(T, \cdot_T)$ is the semigroup $(S \times T, \cdot)$ where $(s_1, t_1) \cdot (s_2, t_2) = (s_1 \cdot_S s_2, t_1 \cdot_T t_2)$.
\end{definition}
\begin{definition}[Direct Product of Boolean Algebras]
    We define the \emph{direct product} of Boolean algebras $B_1$ and $B_2$, denoted $B_1 \times B_2$, to be the Boolean algebra generated by the set $\{A_1 \times A_2 \mid A_1 \in B_1 \text{ and } A_2 \in B_2\}$.
\end{definition}

\begin{definition}[Direct Product of Typed Semigroups]
    \item The \emph{direct product} $(S, G, E) \times (T, H, F)$ is the typed semigroup $(S \times T, G \times H, E \times F)$.
\end{definition}

\begin{definition}[Trivial Extension]
    If there exists a surjective typed homomorphism from $(S, G, E)$ to $(T, H, F)$, then we say that $(S, G, E)$ is a \emph{trivial extension} of $(T, H, F)$.
\end{definition}


\begin{definition}[Weakly Closed Class]
    We call a set of typed semigroups $T$ a \emph{weakly closed class} if it is closed under
    \begin{itemize}
        \item Division: If $(S, G, E) \in T$ and $(S, G, E) \preceq (T, H, F)$, then $(T, H, F) \in T$.
        \item Direct Product: If $(S, G, E), (T, H, F) \in T$, then $(S, G, E) \times (T, H, F) \in T$.
        \item Trivial Extension: If $(S, G, E)$ is a trivial extension of $(T, H, F)$ and $(T, H, F) \in T$, then $(S, G, E) \in T$.
    \end{itemize}
    We write $\emph{wc(T)}$ to denote the smallest weakly closed set of typed semigroups containing $T$.
\end{definition}


\subsection{The Block Product}
The block product will be our main tool for the construction of algebraic characterizations of language classes via logic.\footnote{Historically, the ``\emph{wreath product}'' was first used for this purpose. Since \cite{rhodes1989kernel}, however, the block product has been the preferred and easier-to-work-with tool of choice.} We now build up to its definition:

\begin{definition}[Left and Right Actions]
    A \emph{left action} $\star_l$ of a semigroup $(N, \cdot)$ on a semigroup $(M, +)$ is a function from $N \times M$ to $M$ such that for $n_1,n_2 \in N$ and $m_1,m_2 \in M$, \begin{align*}
        n \star_l (m_1 + m_2) &= n \star_l m_1 + n \star_l m_2\\
        (n_1 \cdot n_2) \star_l m &= n_1 \star_l (n_2 \star_l m)\\
    \end{align*}
    The \emph{right action} $\star_r$ of $(N, \cdot)$ on $(M, +)$ is defined dually. We say that left and right actions of $(N, \cdot)$ on $(M,+)$ are \emph{compatible} if for all $n_1,n_2 \in N$ and $m \in M$, \[
        (n_1 \star_l m) \star_r n_2 = n_1 \star_l (m \star_r n_2).
    \] When clear from context, we may simply write $nm$ for $n \star_l m$ and $mn$ for $m \star_r n$.
\end{definition}

\begin{definition}[Two-sided Semidirect Product]
    For a pair of compatible left and right actions, $\star_l$ and $\star_r$ of $(N, \cdot)$ on $(M, +)$, the \emph{two-sided (or bilateral) semidirect product} of $(M, +)$ and $(N, \cdot)$ with respect to $\star_l$ and $\star_r$ is the semigroup $(M \times N, \circ)$ where for $(m_1,n_1),(m_2,n_2) \in M \times N$, \[
        (m_1,n_1) \circ (m_2,n_2) = (m_1n_2 + n_1m_2, n_1 \cdot n_2).
    \]
\end{definition}

\begin{definition}[Block Product]
    The \emph{block product} of $(M, \cdot_M)$ with $(N, \cdot_N)$, denoted $M \Box N$, is the two-sided semidirect product of $(M^{N^1 \times N^1}, +)$ and $(N, \cdot)$ with respect to the left and right actions $\star_l$ and $\star_r$ where for $f,g \in M^{N^1 \times N^1}$ and $n,n_1,n_2 \in N^1$,
    \begin{itemize}
        \item $(M^{N^1 \times N^1}, +)$ is the monoid of all functions from $N^1 \times N^1$ to $M$ under componentwise product $+$: \[
            (f + g)(n_1,n_2) = f(n_1,n_2) \cdot_M g(n_1,n_2).
        \]
        \item The left action $\star_l$ of $(N, \cdot)$ on $(M^{N^1 \times N^1}, +)$ is defined by \[
            (n \star_l f)(n_1, n_2) = f(n_1 \cdot_N n, n_2).
        \]
        \item The right action $\star_r$ of $(N, \cdot)$ on $(M^{N^1 \times N^1}, +)$ is defined by \[
            (f \star_r n)(n_1, n_2) = f(n_1, n \cdot_N n_2).
        \]
    \end{itemize}
\end{definition}

\subsection{The Typed Block Product}

\begin{definition}[Typed Block Product]\label{def:typedblockproduct}
    Let $(S, G, E)$ and $(S', G', E')$ be typed semigroups and $C \subseteq S'$ be a finite set. Then, the \emph{typed block product with $C$} of $(S, G, E)$ and $(S', G', E')$, denoted $(S, G, E) \boxdot_C (S', G', E')$, is the typed semigroup $(T, H, F)$ where
    \begin{enumerate}[\ \ \ \ (1)]
        \item $T \leq S \Box S'$ such that $T$ is generated by the elements $(f,s')$ such that
        \begin{enumerate}[\ \ \ \ (a)]
            \item $s' \in E' \cup C$ and
            \item $f \in E^{S'^1 \times S'^1}$ such that for $b_1,b_2,b_3,b_4 \in S'$, if for all $c \in C$ and all $A' \in G'$, \(
                b_1cb_2 \in A' \text{ iff } b_3cb_4 \in A',
            \) then $f(b_1,b_2) = f(b_3,b_4)$,
        \end{enumerate}
        \item $H = \{\{(f,s) \mid f(1,1) \in A\} \mid A \in G\}$ where $1$ is the identity of $S'^1$,
        \item and $F = \{(f,s') \mid \text{$(f,s)$ is a generator of $T$ and } s' \in E'\}$.
    \end{enumerate}
\end{definition}
\begin{definition}\label{def:orderedtypedblockproduct}
    Because the typed semigroup corresponding to the order predicate will be a very common, it is convenient to define an \emph{ordered typed block product}, $(S, G, E) \boxtimes_C (S', G', E')$ which will help simplify our algebraic representations whose numerical predicates only include order; this is defined the same as the typed block product above but with a change to condition (1)(b):
    \begin{enumerate}[\ \ \ \ {(1)}(b${}_<$)]
        \setcounter{enumi}{1}
        \item $f \in E^{S'^{1} \times S'^{1}}$ such that for $b_1,b_2,b_3,b_4 \in S'$, if for all $c \in C$ and all $A' \in G'$,
        \begin{enumerate}[\ \ \ \ (i)]
            \item $b_1cb_2 \in A'$ iff $b_3cb_4 \in A'$,
            \item $b_1c \in A'$ iff $b_3c \in A'$,
            \item and $cb_2 \in A'$ iff $cb_4 \in A'$,
        \end{enumerate}
        then $f(b_1,b_2) = f(b_3,b_4)$.
    \end{enumerate}
\end{definition}

\begin{definition}
    For a set of typed semigroups $W$, we let \[
        W_0 = \emph{wc}(W)
    \] and for each $k \geq 1$,
    \begin{itemize}
        \item $W_k = \{S_1 \boxdot_C S_2 \mid S_1 \in W_0 \text{, } S_2 \in W_{k-1} \text{, and finite } C \subseteq S_2\}$
        \item $W_k^< = \{S_1 \boxtimes_C S_2 \mid S_1 \in W_0 \text{, } S_2 \in W_{k-1}^< \text{, and finite } C \subseteq S_2\}$
    \end{itemize}
    We define the \emph{(ordered) strong block product closure of $W$}, denoted $\text{sbpc}(W)$ ($\text{sbpc}_<(W)$), as
    \begin{itemize}
        \item $\text{sbpc}(W) = \bigcup_{k \in \mathbb{N}} W_k$
        \item $\text{sbpc}_<(W) = \bigcup_{k \in \mathbb{N}} W_k^<$.
    \end{itemize}
\end{definition}

\end{document}
